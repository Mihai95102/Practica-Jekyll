<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Práctica 1 | Prácica Jekyll IAW</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Práctica 1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="IAW-Practica-01 Práctica 01 del módulo de IAW" />
<meta property="og:description" content="IAW-Practica-01 Práctica 01 del módulo de IAW" />
<link rel="canonical" href="http://0.0.0.0:4000/Practica-Jekyll/practicas/2023/02/20/practica1.html" />
<meta property="og:url" content="http://0.0.0.0:4000/Practica-Jekyll/practicas/2023/02/20/practica1.html" />
<meta property="og:site_name" content="Prácica Jekyll IAW" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-20T19:18:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Práctica 1" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-02-20T19:18:00-06:00","datePublished":"2023-02-20T19:18:00-06:00","description":"IAW-Practica-01 Práctica 01 del módulo de IAW","headline":"Práctica 1","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/Practica-Jekyll/practicas/2023/02/20/practica1.html"},"url":"http://0.0.0.0:4000/Practica-Jekyll/practicas/2023/02/20/practica1.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Practica-Jekyll/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/Practica-Jekyll/feed.xml" title="Prácica Jekyll IAW" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/Practica-Jekyll/">Prácica Jekyll IAW</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Practica-Jekyll/about/">Acerca de</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Práctica 1</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-02-20T19:18:00-06:00" itemprop="datePublished">Feb 20, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="iaw-practica-01">IAW-Practica-01</h1>
<p>Práctica 01 del módulo de IAW</p>

<h2 id="implementando-la-nueva-instancia">Implementando la nueva Instancia:</h2>
<p>Lo primero que haremos será entrar en dentro del panel EC2 en AWS Academy para poder lanzar la nueva instancia.
<br />
La configuración de la instancia será la siguiente:</p>

<p><br />
<strong>1:</strong> Ponemos el nombre a la máquina y seleccionamos como SO el Ubuntu</p>

<p><img src="images/practica1/creacion1.png" width="350" /></p>

<p><br />
<strong>2:</strong> Seleccionamos el par de claves que hemos usado anteriormente <em>vockey</em>, aunque se podría crear otro par de claves si queremos.</p>

<p><img src="images/practica1/creacion2.png" width="350" /></p>

<p><br />
<strong>3:</strong> Antes de acabar con la configuración de la instancia tendremos que ponerle una capacidad de RAM de 4GB para que la máquina vaya de forma más fluida.</p>

<p><img src="images/practica1/creacion3.png" width="350" /></p>

<p><br />
<strong>4:</strong> Como último paso para acabar con la configuración de la instancia, haremos que la instancia que hemos creado tenga una IP Elástica, aunque este paso no es estrictamente necesario.</p>

<h2 id="implementación-de-la-instancia-en-visual-studio-code">Implementación de la Instancia en Visual Studio Code</h2>

<p>Previamente a la implementación de la instancia tendremos que instalar en el Visual Studio la extensión del <em>Explorador Remoto</em> de <strong>Microsoft</strong></p>

<p><img src="images/practica1/implementar1.png" width="350" /></p>

<p><br />
<strong>1:</strong> Una vez instalada la extensión añadiremos el acceso a la máquina dentro de la configuración de los destinos SSH.</p>

<p><img src="images/practica1/implementar2.png" width="350" /></p>

<p><br />
<strong>2:</strong> Hecho esto ya podremos conectarnos a la máquina de RHEL remotamente desde el Visual Studio. Ahora clonaremos el repositorio que hemos creado en <strong>GitHub</strong> para poder empezar a trabajar. Para clonar el repositorio tendremos que copiar el enlace del repositorio y ejecutar el siguiente comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/Mihai95102/IAW-Practica-01.git
</code></pre></div></div>

<h2 id="empezando-a-automatizar-los-scripts">Empezando a automatizar los scripts</h2>

<p>Para empezar a trabajar, primero crearemos esta estrctura dentro del directorio:</p>

<p><img src="images/practica1/trabajo1.png" width="350" /></p>

<p><br />
Empezamos a crear el script de automatización para la instalación de las herramientas LAMP</p>

<p>El script <em>install_lamp.sh</em> contendrá lo siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">set</span> <span class="nt">-x</span>

<span class="c"># Actualizamos los repositorios</span>
apt-get update

<span class="c"># Actualizamos los paquetes nuevos</span>
<span class="c"># apt-get upgrade -y</span>

<span class="c"># Instalamos el servidor web apache</span>
apt-get <span class="nb">install </span>apache2 <span class="nt">-y</span>

<span class="c"># Instalamos el sistema gestor de BD</span>
apt-get <span class="nb">install </span>mysql-server <span class="nt">-y</span>

<span class="c"># Instalamos los módulos de PHP</span>
apt-get <span class="nb">install </span>libapache2-mod-php php-mysql <span class="nt">-y</span>

<span class="c"># Copiamos el archivo para ver que se ha instalado</span>
<span class="nb">cp</span> ../PHP/info.php /var/www/html
</code></pre></div></div>

<p>El siguiente script y último que creamremos será uno el que instalaremos las herramientas de PHPMyAdmin, Adminer y GoAcess.</p>

<p>El script de <em>install.tools.sh</em> será el siguiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">set</span> <span class="nt">-x</span>

<span class="c"># Variables de configuración</span>
<span class="nv">PHPMYADMIN_APP_PASSWORD</span><span class="o">=</span>hola
<span class="nv">STATS_USER</span><span class="o">=</span>mihai
<span class="nv">STATS_PASSWORD</span><span class="o">=</span>hola
<span class="nv">DB_USER</span><span class="o">=</span>mihai
<span class="nv">DB_PASSWORD</span><span class="o">=</span>hola

<span class="c"># Configuramos las respuestas para hacer una instalación desatendida de phpMyAdmin</span>
<span class="nb">echo</span> <span class="s2">"phpmyadmin phpmyadmin/reconfigure-webserver multiselect apache2"</span> | debconf-set-selections
<span class="nb">echo</span> <span class="s2">"phpmyadmin phpmyadmin/dbconfig-install boolean true"</span> | debconf-set-selections
<span class="nb">echo</span> <span class="s2">"phpmyadmin phpmyadmin/mysql/app-pass password </span><span class="nv">$PHPMYADMIN_APP_PASSWORD</span><span class="s2">"</span> | debconf-set-selections
<span class="nb">echo</span> <span class="s2">"phpmyadmin phpmyadmin/app-password-confirm password </span><span class="nv">$PHPMYADMIN_APP_PASSWORD</span><span class="s2">"</span> | debconf-set-selections

<span class="c"># Creación de la base de datos y el usuario de BD</span>
mysql <span class="nt">-u</span> root <span class="o">&lt;&lt;&lt;</span> <span class="s2">"DROP USER IF EXISTS </span><span class="nv">$DB_USER</span><span class="s2">"</span>
mysql <span class="nt">-u</span> root <span class="o">&lt;&lt;&lt;</span> <span class="s2">"CREATE USER IF NOT EXISTS '</span><span class="nv">$DB_USER</span><span class="s2">'@'%' IDENTIFIED BY '</span><span class="nv">$DB_PASSWORD</span><span class="s2">'"</span>
mysql <span class="nt">-u</span> root <span class="o">&lt;&lt;&lt;</span> <span class="s2">"GRANT ALL PRIVILEGES ON *.* TO </span><span class="nv">$DB_USER</span><span class="s2">@'%'"</span>

<span class="c"># Instalación de phpMyAdmin</span>
apt <span class="nb">install </span>phpmyadmin php-mbstring php-zip php-gd php-json php-curl <span class="nt">-y</span>

<span class="c"># Instalación de Adminer:</span>

    <span class="c"># Descargamos el archivo de Adminer</span>
    wget https://github.com/vrana/adminer/releases/download/v4.8.1/adminer-4.8.1-mysql.php

    <span class="c"># Creamos un directorio para Adminer</span>
    <span class="nb">mkdir</span> <span class="nt">-p</span> /var/www/html/adminer

    <span class="c"># Renombramos el archivo</span>
    <span class="nb">mv </span>adminer-4.8.1-mysql.php /var/www/html/adminer/index.php

<span class="c"># Instalación de GoAccess:</span>
    
    <span class="c"># Añadimos el repositorio de GoAccess</span>
    <span class="nb">echo</span> <span class="s2">"deb http://deb.goaccess.io/ </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span> <span class="o">&gt;</span> /etc/apt/sources.list.d/goaccess.list
    
    <span class="c"># Añadimos la clave pública de GoAccess en nuestra máquina</span>
    wget <span class="nt">-O</span> - https://deb.goaccess.io/gnugpg.key | <span class="nb">sudo </span>apt-key add -
    
    <span class="c"># Actualizamos los repositorios</span>
    apt update
    
    <span class="c"># Instalamos GoAccess</span>
    apt <span class="nb">install </span>goaccess <span class="nt">-y</span>

<span class="c"># Creamos el directorio stats</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /var/www/html/stats

<span class="c"># Modificamos el propietario y el grupo del directorio /var/www/html</span>
<span class="nb">chown </span>www-data:www-data /var/www/html <span class="nt">-R</span>

<span class="c"># Ejecutamos GoAcces en segundo plano</span>
<span class="nb">sudo </span>goaccess /var/log/apache2/access.log <span class="nt">-o</span> /var/www/html/stats/index.html <span class="nt">--log-format</span><span class="o">=</span>COMBINED <span class="nt">--real-time-html</span> <span class="nt">--daemonize</span>

<span class="c"># Control de acceso a un directorio con .htaccess:</span>

    <span class="c"># Creamos un directorio para guardar el archivo de claves</span>
    <span class="nb">mkdir</span> <span class="nt">-p</span> /etc/apache2/claves

    <span class="c"># Creamos un usuario/password/en un archivo .htpasswd</span>
    <span class="nb">sudo </span>htpasswd <span class="nt">-bc</span> /etc/apache2/claves/.htpasswd <span class="nv">$STATS_USER</span> <span class="nv">$STATS_PASSWORD</span>

    <span class="c"># Copiamos el archivo de configuración de Apache</span>
    <span class="nb">cp</span> ../Conf/000-default.conf /etc/apache2/sites-available

    <span class="c"># Reiniciamos el servicio de Apache</span>
    systemctl restart apache2

<span class="c"># Control de acceso a un directorio con .htaccess</span>

     <span class="c"># Creamos un usuario/password/en un archivo .htpasswd</span>
    <span class="nb">sudo </span>htpasswd <span class="nt">-bc</span> /etc/apache2/claves/.htpasswd <span class="nv">$STATS_USER</span> <span class="nv">$STATS_PASSWORD</span>

    <span class="c"># Copiamos el archivo htaccess en /var/www/html/stats</span>
    <span class="nb">cp</span> ../htaccess/htaccess /var/www/html/stats/.htaccess

    <span class="c"># Copiamos el archivo de configuración de Apache</span>
    <span class="nb">cp</span> ../Conf/000-default-htaccess.conf /etc/apache2/sites-available/000-default.conf

    <span class="c"># Reiniciamos el servicio de Apache</span>
    systemctl restart apache2
</code></pre></div></div>

<p>Una ejecutemos estos scripts podremos comprobar que la instalación se ha realizado correctamente:</p>

<p><strong>1:</strong> Para comprobar que el servidor de PHPMyAdmin funciona tendremos que acceder a él con la IP de la máquina, <em>“18.234.12.215/phpmyadmin”</em>.</p>

<p><img src="images/practica1/comprobar1.png" width="350" /></p>

<p>Una vez accedemos con nuestro usuario y contraseña podemos ver que tenemos acceso a todas las bases de datos del sistema.</p>

<p><img src="images/practica1/comprobar2.png" width="350" /></p>

<p><strong>2:</strong> A continuación comprobaremos que podemos acceder al servidor de Adminer con el mismo usuario y contraseña que hemos usado para PHPMyAdmin. Para acceder al servidor de Adminner escribiremos en el navegador <em>“18.234.12.215/adminer”</em>.</p>

<p><img src="images/practica1/comprobar3.png" width="350" /></p>

<p>Una vez accedemos con nuestro usuario y contraseña podemos ver que tenemos acceso a todas las bases de datos del sistema.</p>

<p><img src="images/practica1/comprobar4.png" width="350" /></p>

<p><strong>3:</strong> Finalmente entraremos al servidor de GoAcess que registra la actividad que hay en el servidor. Para acceder a el con nuestro usuario y contraseña ponemos en el navegador <em>“18.234.12.215/stats”</em>.</p>

<p><img src="images/practica1/comprobar5.png" width="350" /></p>

<p>Una vez accedamos podemos ver las estadísticas del servidor.</p>

<p><img src="images/practica1/comprobar6.png" width="350" /></p>

  </div><a class="u-url" href="/Practica-Jekyll/practicas/2023/02/20/practica1.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Practica-Jekyll/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Prácica Jekyll IAW</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Prácica Jekyll IAW</li><li><a class="u-email" href="mailto:mbut182@g.educaand.es">mbut182@g.educaand.es</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Mihai95102"><svg class="svg-icon"><use xlink:href="/Practica-Jekyll/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Mihai95102</span></a></li><li><a href="https://www.twitter.com/ElMatador95102"><svg class="svg-icon"><use xlink:href="/Practica-Jekyll/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">ElMatador95102</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Hola buenas tardes esto es una prueba de creación de un página Web con Jekyll.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
